{% extends "onematrix/base.html" %}
{% block desktop_content %}
<style>
  /* Styles for active FAQ category */
  .faq-category.active {
    background-color: #f9fafb;
    border-color: #6b7280;
    font-weight: 600;
  }
</style>
<div class="flex flex-col justify-center items-center bg-[#E9ECEA] mx-auto px-4 py-16">
  <div class="max-w-6xl mx-0 lg:mx-[80px]">
    <!-- Badge -->
    <div class="inline-flex items-center px-3 py-1 rounded-full bg-white shadow-lg mb-8">
      <svg class="w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"></path>
      </svg>
      <span class="text-sm font-medium uppercase">CONTACT PAGE</span>
    </div>

    <!-- Main Content Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-[10rem]">
      <!-- Left Side - Get In Touch Section -->
      <div>
        <h1 class="text-3xl sm:text-3xl md:text-4xl lg:text-6xl font-bold mb-6">
          Get In Touch
          <br/>
          With Us <span class="text-gray-400">Today!</span>
        </h1>
        <p class="text-lg text-gray-600 max-w-2xl mb-12">
          Got a question? Need a quick demo? Or just wanna say hi before you go all-in?
          We're always open for meaningful convos (except spam—our AI blocks that too).
        </p>

        <!-- Contact Cards -->
        <div class="grid grid-cols-3 lg:grid-cols-2 gap-6">
          <!-- Message Us -->
          <div class="bg-gradient-to-br from-gray-900 to-black text-white rounded-3xl p-6 relative overflow-hidden">
            <div class="flex justify-between items-start mb-4">
              <div class="p-3 bg-gray-800 rounded-full">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                </svg>
              </div>
              <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </div>
            <h3 class="text-xl font-semibold mb-2">Email Us</h3>
            <p class="text-gray-400 mb-4">We usually reply within a few hours, unless we're in the zone</p>
            <a href="mailto:hello@1matrix.io" class="bg-white text-black py-2 px-4 rounded-xl inline-flex items-center w-full hover:bg-gray-100 transition-colors">
              <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              <span class="text-sm">hello@1matrix.io</span>
            </a>
            <div class="absolute inset-0 bg-gradient-to-br from-transparent to-gray-900 opacity-40 pointer-events-none"></div>
          </div>

          <!-- Call Us -->
          <div class="bg-gradient-to-br from-gray-900 to-black text-white rounded-3xl p-6 relative overflow-hidden">
            <div class="flex justify-between items-start mb-4">
              <div class="p-3 bg-gray-800 rounded-full">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
              </div>
              <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </div>
            <h3 class="text-xl font-semibold mb-2">Call Us</h3>
            <p class="text-gray-400 mb-4">Available Mon–Sat, 10AM–7PM IST</p>
            <a href="tel:+917840060066" class="bg-white text-black py-2 px-4 rounded-xl inline-flex items-center w-full hover:bg-gray-100 transition-colors">
              <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              <span class="text-sm">784 006 0066</span>
            </a>
            <div class="absolute inset-0 bg-gradient-to-br from-transparent to-gray-900 opacity-40 pointer-events-none"></div>
          </div>
        </div>
      </div>

      <!-- Right Side - Contact Form -->
      <div class="p-6 rounded-3xl shadow-lg mb-24">
        <div class="text-left">
          <div class="inline-flex items-center px-3 py-1 rounded-full bg-white shadow-lg mb-8">
            <span class="text-sm font-medium">1Matrix, Contact Form</span>
          </div>
          
          <h2 class="text-2xl font-md mb-6">
            Feel free to send our<br/>
            friendly team a message
          </h2>
        </div>
        <!-- Form container with success message that will be initially hidden -->
        <div id="contactFormContainer">
          <form id="contactForm" method="post" action="/api/contact/">
            {% csrf_token %}
            <!-- Hidden field to detect form submit method -->
            <input type="hidden" name="submit_method" value="direct">
            <div class="mb-3 grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Your Name <span class="text-gray-400">*</span></label>
                <input type="text" name="name" placeholder="John Smith" class="w-full px-4 py-3 rounded-xl bg-white border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-200 text-xs placeholder:text-sm" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Mobile Number <span class="text-gray-400">*</span></label>
                <input type="text" name="mobile" placeholder="Your mobile number" class="w-full px-4 py-3 rounded-xl bg-white border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-200 text-xs placeholder:text-sm" required>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="block text-sm font-medium text-gray-700 mb-2">Email <span class="text-gray-400">*</span></label>
              <input type="email" name="email" placeholder="Enter Your Email" class="w-full px-4 py-3 rounded-xl bg-white border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-200 text-xs placeholder:text-sm" required>
            </div>
            
            <div class="mb-3">
              <label class="block text-sm font-medium text-gray-700 mb-2">Message <span class="text-gray-400">*</span></label>
              <textarea rows="3" name="message" placeholder="How Can We Help?" class="w-full px-4 py-3 rounded-xl bg-white border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-200 text-xs placeholder:text-sm" required></textarea>
            </div>
            
            <button type="submit" class="w-full bg-gray-900 text-white font-medium py-3 px-6 rounded-xl hover:bg-black focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 shadow-lg">
              Send Message
            </button>
          </form>
        </div>

        <!-- Thank you message (initially hidden) -->
        <div id="thankYouMessage" class="hidden">
          <div class="bg-white p-6 rounded-3xl text-center">
            <div class="flex justify-center mb-6">
              <div class="p-4 bg-green-50 rounded-full">
                <svg class="w-12 h-12 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
            </div>
            <h3 class="text-2xl font-bold mb-3">Thank You!</h3>
            <p class="text-gray-600 mb-8">
              We've received your message and will get back to you soon. 
              Our team typically responds within 24 hours on business days.
            </p>
            <div class="text-sm text-green-600 mb-4" id="confirmationDetails">
              <!-- Form details will appear here for confirmation -->
            </div>
            <button onclick="resetContactForm()" class="bg-gray-100 text-gray-800 font-medium py-3 px-6 rounded-xl hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300 shadow-md transition-colors">
              Send Another Message
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- FAQ Section -->
    <!-- Address Section -->
    <div class="bg-white rounded-3xl p-6 my-8 shadow-lg">
      <!-- Badge -->
      <div class="flex justify-center mb-6">
        <div class="inline-flex items-center px-3 py-1 rounded-full bg-white border border-gray-200 shadow-sm">
          <span class="text-sm font-medium uppercase">Our Office</span>
        </div>
      </div>

      <!-- Heading -->
      <div class="text-center mb-6">
        <h2 class="text-4xl font-bold">Visit Our Location</h2>
      </div>

      <!-- Subtext -->
      <p class="text-gray-600 mb-12 max-w-3xl mx-auto text-center">
        Feel free to drop by our office during business hours.<br>We'd love to meet you in person and discuss how we can help.
      </p>

      <!-- Address Cards -->
      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        <!-- Head Office -->
        <div class="bg-white rounded-xl p-6 border border-gray-100 shadow-sm">
          <div class="flex items-center gap-4 mb-4">
            <div class="p-3 bg-gray-50 rounded-lg">
              <svg class="w-6 h-6 text-gray-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
            </div>
            <h3 class="text-xl font-semibold">Head Office</h3>
          </div>
          <div class="space-y-2 text-gray-600">
            <p>1ST FLOOR, HOUSE NO 55 OLD NO 2012 PLOT NO 2, BLK WZ SIRI NAGAR, SHAKUR BASTI NEAR MCD SCHOOL, NORTH WEST DELHI, 110034</p>
          </div>
        </div>

        <!-- Business Hours -->
        <div class="bg-white rounded-xl p-6 border border-gray-100 shadow-sm">
          <div class="flex items-center gap-4 mb-4">
            <div class="p-3 bg-gray-50 rounded-lg">
              <svg class="w-6 h-6 text-gray-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h3 class="text-xl font-semibold">Business Hours</h3>
          </div>
          <div class="space-y-2 text-gray-600">
            <p>Monday - Friday: 9:00 AM - 6:00 PM</p>
            <p>Saturday: 10:00 AM - 2:00 PM</p>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-3xl p-6 my-8 shadow-lg faq-section">
      <!-- Badge -->
      <div class="flex justify-center mb-6">
        <div class="inline-flex items-center px-3 py-1 rounded-full bg-white border border-gray-200 shadow-sm">
          <span class="text-sm font-medium uppercase">FAQ</span>
        </div>
      </div>
      
      <!-- Heading -->
      <div class="text-center mb-6">
        <h2 class="text-4xl font-bold">Questions & Answers</h2>
      </div>
      
      <!-- Subtext -->
      <p class="text-gray-600 mb-12 max-w-3xl mx-auto text-center">
        No fluff. No confusion. Just straight-up answers to what matters.<br>Explore topics below to understand how 1Matrix works, what you get, and how we handle things—no corporate jargon, we promise.
      </p>
      
      <!-- Category cards -->
      <div class="grid grid-cols-2 gap-4 mb-16 max-w-3xl mx-auto">
        <!-- Dynamic FAQ Categories -->
        {% for category in faq_categories %}
        <div class="bg-white rounded-xl shadow-sm p-4 flex items-center gap-3 border border-gray-100 cursor-pointer faq-category {% if category == default_category %}active{% endif %}" data-category="{{ category.id }}">
          <div class="p-1">
            {% if category.name|lower == 'service' %}
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="5" width="20" height="14" rx="2" />
              <line x1="2" y1="10" x2="22" y2="10" />
            </svg>
            {% elif category.name|lower == 'plans' %}
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="20" x2="12" y2="10" />
              <line x1="18" y1="20" x2="18" y2="4" />
              <line x1="6" y1="20" x2="6" y2="16" />
            </svg>
            {% elif category.name|lower == 'refunds' %}
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 3h18v18H3z"/>
              <path d="M3 9h18"/>
              <path d="M9 21V9"/>
            </svg>
            {% elif category.name|lower == 'manage' %}
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 22V2M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H7" />
            </svg>
            {% else %}
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            {% endif %}
          </div>
          <span class="font-medium text-sm">{{ category.name }}</span>
        </div>
        {% endfor %}
      </div>

      <!-- FAQ Items Display Section -->
      <div class="max-w-3xl mx-auto">
        <h3 class="text-2xl font-bold mb-8 text-center" id="faqCategoryTitle">
          {% if default_category %}{{ default_category.name }}{% else %}FAQs{% endif %}
        </h3>
        <div class="space-y-2" id="faqAccordion">
          <!-- Default category FAQs will be shown -->
          {% if default_category %}
            {% for item in default_category.faq_items.all %}
              {% if item.is_active %}
              <div class="bg-white rounded-xl p-6 border border-gray-100 shadow-sm">
                <div class="flex justify-between items-center cursor-pointer faq-question">
                  <h4 class="font-medium">{{ item.question }}</h4>
                  <svg class="w-5 h-5 transform transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </div>
                <div class="mt-4 text-gray-600 hidden faq-answer transition-all duration-300 ease-in-out">
                  {{ item.answer|safe }}
                </div>
              </div>
              {% endif %}
            {% empty %}
              <div class="text-center text-gray-500">No FAQs available for this category.</div>
            {% endfor %}
          {% else %}
            <div class="text-center text-gray-500">No FAQ categories available.</div>
          {% endif %}
        </div>
      </div>
    </div>
    
    <!-- Decorative squares in corner -->
    <div class="absolute top-40 right-12 opacity-10">
      <div class="grid grid-cols-3 gap-2">
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block mobile_content %}
<script src="https://cdn.tailwindcss.com"></script>
<style>
  /* Styles for active FAQ category */
  .faq-category.active {
    background-color: #f9fafb;
    border-color: #6b7280;
    font-weight: 600;
  }
</style>
<div class="flex flex-col justify-center items-center bg-[#E9ECEA] mx-auto px-4 py-16">
  <div class="max-w-6xl mx-5">
    <!-- Badge -->
    <div class="inline-flex items-center px-3 py-1 rounded-full bg-white shadow-lg mb-8">
      <svg class="w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"></path>
      </svg>
      <span class="text-sm font-medium uppercase">CONTACT PAGE</span>
    </div>

    <!-- Main Content Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-[5rem]">
      <!-- Left Side - Get In Touch Section -->
      <div>
        <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-6xl font-bold mb-6">
          Get In Touch
          <br/>
          With Us <span class="text-gray-400">Today!</span>
        </h1>
        <p class="text-lg text-gray-600 max-w-2xl mb-12">
          Got a question? Need a quick demo? Or just wanna say hi before you go all-in?
          We're always open for meaningful convos (except spam—our AI blocks that too).
        </p>

        <!-- Contact Cards -->
        <div class="grid grid-cols-2 gap-3">
          <!-- Message Us -->
          <div class="bg-gradient-to-br from-gray-900 to-black text-white rounded-3xl p-4 relative overflow-hidden">
            <div class="flex justify-between items-start mb-2">
              <div class="p-2 bg-gray-800 rounded-full">
                <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                </svg>
              </div>
              <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">Email Us</h3>
            <p class="text-gray-400 mb-2 text-sm">hello@1matrix.com</p>
            <a href="mailto:hello@1matrix.com" class="bg-white text-black py-1.5 px-3 rounded-xl inline-flex items-center w-full hover:bg-gray-100 transition-colors">
              <svg class="w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              <span class="text-xs">hello@1matrix.com</span>
            </a>
            <div class="absolute inset-0 bg-gradient-to-br from-transparent to-gray-900 opacity-40 pointer-events-none"></div>
          </div>

          <!-- Call Us -->
          <div class="bg-gradient-to-br from-gray-900 to-black text-white rounded-3xl p-4 relative overflow-hidden">
            <div class="flex justify-between items-start mb-2">
              <div class="p-2 bg-gray-800 rounded-full">
                <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
              </div>
              <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">Call Us</h3>
            <p class="text-gray-400 mb-2 text-sm">+91 78400 60066</p>
            <a href="tel:+917840060066" class="bg-white text-black py-1.5 px-3 rounded-xl inline-flex items-center w-full hover:bg-gray-100 transition-colors">
              <svg class="w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              <span class="text-xs">+91 78400 60066</span>
            </a>
            <div class="absolute inset-0 bg-gradient-to-br from-transparent to-gray-900 opacity-40 pointer-events-none"></div>
          </div>
        </div>
      </div>

      <!-- Right Side - Contact Form -->
      <div class="p-6 rounded-3xl shadow-lg mb-24">
        <div class="text-left">
          <div class="inline-flex items-center px-3 py-1 rounded-full bg-white shadow-lg mb-8">
            <span class="text-sm font-medium">Contact Form</span>
          </div>
          
          <h2 class="text-2xl font-md mb-6">
            Feel free to send our<br/>
            friendly team a message
          </h2>
        </div>
        <form>
          <div class="mb-3 grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Your Name <span class="text-gray-400">*</span></label>
              <input type="text" placeholder="John Smith" class="w-full px-4 py-3 rounded-xl bg-white border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-200 text-xs placeholder:text-sm">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Mobile Number <span class="text-gray-400">*</span></label>
              <input type="text" placeholder="Your mobile number" class="w-full px-4 py-3 rounded-xl bg-white border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-200 text-xs placeholder:text-sm">
            </div>
          </div>
          
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-700 mb-2">Email <span class="text-gray-400">*</span></label>
            <input type="email" placeholder="Enter Your Email" class="w-full px-4 py-3 rounded-xl bg-white border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-200 text-xs placeholder:text-sm">
          </div>
          
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-700 mb-2">Message <span class="text-gray-400">*</span></label>
            <textarea rows="3" placeholder="How Can We Help?" class="w-full px-4 py-3 rounded-xl bg-white border border-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-200 text-xs placeholder:text-sm"></textarea>
          </div>
          
          <button type="submit" class="w-full bg-gray-900 text-white font-medium py-3 px-6 rounded-xl hover:bg-black focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 shadow-lg">
            Send Message
          </button>
        </form>
      </div>
    </div>
    <!-- FAQ Section -->
    <div class="bg-white rounded-3xl p-12 my-8 shadow-lg faq-section">
      <!-- Badge -->
      <div class="flex justify-center mb-6">
        <div class="inline-flex items-center px-3 py-1 rounded-full bg-white border border-gray-200 shadow-sm">
          <span class="text-sm font-medium uppercase">FAQ</span>
        </div>
      </div>
      
      <!-- Heading -->
      <div class="text-center mb-6">
        <h2 class="text-3xl font-bold">Questions & Answers</h2>
      </div>
      
      <!-- Subtext -->
      <p class="text-gray-600 mb-12 max-w-3xl mx-auto text-center">
        Got a question? Need a quick demo? Or just wanna say hi before you go all-in?
        We're always open for meaningful convos (except spam—our AI blocks that too).
      </p>
      
      <!-- Category cards -->
      <div class="grid grid-cols-2 gap-4 mb-16 max-w-screen-md mx-auto">
        <!-- Dynamic FAQ Categories -->
        {% for category in faq_categories %}
        <div class="bg-white rounded-xl shadow-sm p-4 flex items-center gap-3 border border-gray-140 cursor-pointer faq-category hover:bg-gray-50 transition-colors" data-category="{{ category.id }}">
          <div>
            {% if category.name|lower == 'service' %}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
              <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
              <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52z"/>
            </svg>
            {% elif category.name|lower == 'plans' %}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-currency-rupee" viewBox="0 0 16 16">
              <path d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4z"/>
            </svg>
            {% elif category.name|lower == 'refunds' %}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cash" viewBox="0 0 16 16">
              <path d="M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
              <path d="M0 4a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V6a2 2 0 0 1-2-2z"/>
            </svg>
            {% elif category.name|lower == 'manage' %}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
              <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
            </svg>
            {% else %}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
              <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .245-.111.245-.248.002-.245-.137-.245-.244.11-.244.247zm2.444 1.387a.217.217 0 0 1 .037.299c-.093.134-1.13.588-1.98.982-2.686.898.4 1.352 1.548 1.16 2.401.765.246.405.534.546.822.241.299C14.88 13.456 10.82 15 8 15c-2.82 0-6.88-1.544-8.928-3.496a.856.856 0 0 1 .037-.299c.299.405.589.547.822.242.298C3.12 9.66 7.18 8.104 8 8.104c.822 0 4.88 1.544 6.928 3.496z"/>
            </svg>
            {% endif %}
          </div>
          <span class="font-medium text-sm">{{ category.name }}</span>
        </div>
        {% endfor %}
      </div>
      
      <!-- Getting Started Section -->
      <div class="text-left max-w-3xl mx-auto">
        <h3 class="text-2xl font-bold mb-6">Getting Started:</h3>
        
        <!-- FAQ Questions - Accordion Style -->
        <div class="space-y-2">
          <!-- Question 1 -->
          <div class="border-b border-gray-200 pb-5">
            <button class="flex justify-between items-center w-full text-left">
              <span class="text-lg font-medium">How do I set up a budget?</span>
              <svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
          </div>
          
          <!-- Question 2 -->
          <div class="border-b border-gray-200 pb-5">
            <button class="flex justify-between items-center w-full text-left">
              <span class="text-lg font-medium">What's the best way to save for retirement?</span>
              <svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
          </div>
          
          <!-- Question 3 -->
          <div class="border-b border-gray-200 pb-5">
            <button class="flex justify-between items-center w-full text-left">
              <span class="text-lg font-medium">How do I improve my credit score?</span>
              <svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Decorative squares in corner -->
    <div class="absolute top-40 right-12 opacity-10">
      <div class="grid grid-cols-3 gap-2">
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
        <div class="w-8 h-8 border-2 border-gray-300 rounded-lg"></div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Show thank you message function for reuse
    function showThankYouMessage(name, email, mobile) {
      // Show thank you message
      document.getElementById('contactFormContainer').classList.add('hidden');
      document.getElementById('thankYouMessage').classList.remove('hidden');
      
      // Show confirmation details if provided
      if (name && email && mobile) {
        const confirmationDetails = document.getElementById('confirmationDetails');
        if (confirmationDetails) {
          confirmationDetails.innerHTML = `Name: ${name}<br>Email: ${email}<br>Mobile: ${mobile}`;
        }
      }
    }
    
    // Check if we're coming back from a successful form submission
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success') === 'true') {
      showThankYouMessage();
    }
    
    // Contact form submission
    const contactForm = document.getElementById('contactForm');
    if (contactForm) {
      contactForm.addEventListener('submit', function(e) {
        // Prevent default submission
        e.preventDefault();
        
        // Get form data
        const formData = new FormData(contactForm);
        
        // Store form data for confirmation
        const name = formData.get('name');
        const email = formData.get('email');
        const mobile = formData.get('mobile');
        
        // Debug form data
        console.log("Submitting form data:", 
          {name: name, email: email, mobile: mobile, message: formData.get('message')});
        
        // Show loading state on button
        const submitButton = contactForm.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;
        submitButton.innerHTML = '<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Sending...';
        submitButton.disabled = true;
        
        // Get CSRF token 
        const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
        
        // Use fetch with POST (simplified)
        fetch('/api/contact/', {
          method: 'POST',
          body: formData,
          headers: {
            'X-Requested-With': 'XMLHttpRequest',
            'X-CSRFToken': csrfToken
          }
        })
        .then(response => {
          console.log("Response status:", response.status);
          // Parse response JSON regardless of success/error status
          return response.json().then(data => {
            console.log("Response data:", data);
            // Only continue processing if response is OK
            if (!response.ok) {
              throw new Error(data.message || 'Network response was not ok');
            }
            return data;
          });
        })
        .then(data => {
          console.log("Success:", data);
          
          // Display thank you message with form data
          showThankYouMessage(name, email, mobile);
          
          // Reset form for future use
          contactForm.reset();
        })
        .catch(error => {
          console.error('Error:', error);
          // Show alert with error message
          alert(error.message || 'There was an error sending your message. Please try again later.');
          
          // As a fallback, try submitting the form directly
          if (confirm("Would you like to try submitting the form directly?")) {
            contactForm.setAttribute('method', 'post');
            contactForm.setAttribute('action', '/api/contact/');
            contactForm.submit();
          }
        })
        .finally(() => {
          // Reset button state
          submitButton.innerHTML = originalButtonText;
          submitButton.disabled = false;
        });
      });
    }
    
    // Reset contact form function 
    window.resetContactForm = function() {
      document.getElementById('thankYouMessage').classList.add('hidden');
      document.getElementById('contactFormContainer').classList.remove('hidden');
      const form = document.getElementById('contactForm');
      if (form) {
        form.reset();
      }
    };
    
    // FAQ functionality
    // Define showFAQCategory function for potential inline onclick handlers
    window.showFAQCategory = function(categoryId) {
      fetchFAQsByCategory(categoryId);
      
      // Update active state on categories
      document.querySelectorAll('.faq-category').forEach(cat => {
        if (cat.getAttribute('data-category') === categoryId) {
          cat.classList.add('active', 'bg-gray-50');
        } else {
          cat.classList.remove('active', 'bg-gray-50');
        }
      });
    };
    
    // Initialize accordion functionality
    initAccordion();
    
    // Handle category switching
    const faqCategories = document.querySelectorAll('.faq-category');
    
    faqCategories.forEach(category => {
      // Remove any existing click handlers first
      category.removeEventListener('click', categoryClickHandler);
      
      // Add our click handler
      category.addEventListener('click', categoryClickHandler);
    });
    
    function categoryClickHandler(event) {
      const categoryId = this.getAttribute('data-category');
      
      // Prevent any default action (like form submission)
      event.preventDefault();
      
      // Remove active class from all categories
      document.querySelectorAll('.faq-category').forEach(cat => {
        cat.classList.remove('active', 'bg-gray-50');
      });
      
      // Add active class to clicked category
      this.classList.add('active', 'bg-gray-50');
      
      // Fetch FAQs for this category using AJAX
      fetchFAQsByCategory(categoryId);
    }
    
    // Function to initialize accordion functionality
    function initAccordion() {
      document.querySelectorAll('.faq-question').forEach(question => {
        // Remove existing event listeners first to prevent duplicates
        question.removeEventListener('click', questionClickHandler);
        
        // Add click event listener
        question.addEventListener('click', questionClickHandler);
      });
    }
    
    function questionClickHandler() {
      const answer = this.nextElementSibling;
      const arrow = this.querySelector('svg');
      
      // Toggle answer visibility
      answer.classList.toggle('hidden');
      
      // Rotate arrow
      arrow.classList.toggle('rotate-180');
    }
    
    // Function to fetch FAQs for a specific category
    function fetchFAQsByCategory(categoryId) {
      fetch(`/api/faq/items?category=${categoryId}`)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          // Get the category name for the title
          fetch(`/api/faq/categories/${categoryId}/`)
            .then(response => {
              if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
              }
              return response.json();
            })
            .then(categoryData => {
              // Find all instances of faqCategoryTitle and update them
              document.querySelectorAll('#faqCategoryTitle').forEach(title => {
                title.textContent = categoryData.name;
              });
              
              // Find all instances of faqAccordion and update them
              document.querySelectorAll('#faqAccordion').forEach(accordionContainer => {
                // Clear current FAQs
                accordionContainer.innerHTML = '';
                
                // If no items, show a message
                if (data.length === 0) {
                  const noItems = document.createElement('div');
                  noItems.className = 'text-center text-gray-500';
                  noItems.textContent = 'No FAQs available for this category.';
                  accordionContainer.appendChild(noItems);
                  return;
                }
                
                // Create and append new FAQ items
                data.forEach(item => {
                  const faqItem = document.createElement('div');
                  faqItem.className = 'bg-white rounded-xl p-6 border border-gray-100 shadow-sm';
                  
                  const questionDiv = document.createElement('div');
                  questionDiv.className = 'flex justify-between items-center cursor-pointer faq-question';
                  
                  const question = document.createElement('h4');
                  question.className = 'font-medium';
                  question.textContent = item.question;
                  
                  const arrow = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                  arrow.setAttribute('class', 'w-5 h-5 transform transition-transform duration-300');
                  arrow.setAttribute('viewBox', '0 0 24 24');
                  arrow.setAttribute('fill', 'none');
                  arrow.setAttribute('stroke', 'currentColor');
                  arrow.setAttribute('stroke-width', '2');
                  arrow.setAttribute('stroke-linecap', 'round');
                  arrow.setAttribute('stroke-linejoin', 'round');
                  
                  const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                  path.setAttribute('d', 'M6 9l6 6 6-6');
                  arrow.appendChild(path);
                  
                  questionDiv.appendChild(question);
                  questionDiv.appendChild(arrow);
                  
                  const answer = document.createElement('div');
                  answer.className = 'mt-4 text-gray-600 hidden faq-answer transition-all duration-300 ease-in-out';
                  answer.innerHTML = item.answer;
                  
                  faqItem.appendChild(questionDiv);
                  faqItem.appendChild(answer);
                  
                  accordionContainer.appendChild(faqItem);
                });
                
                // Re-initialize accordion for new items
                initAccordion();
              });
            })
            .catch(error => console.error('Error fetching category:', error));
        })
        .catch(error => console.error('Error fetching FAQs:', error));
    }
  });
</script>
{% endblock %}
